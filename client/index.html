<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Rust + Glow Triangle</title>
        <style>
            body {
                margin: 0;
            }
            canvas {
                display: block;
            }
        </style>
    </head>
    <body>
        <canvas id="canvas" width="640" height="480"></canvas>
        <div id="root"></div>
        <script type="module">
            import init, { increment, Engine } from "./pkg/client.js";

            let module = await init().catch((err) => console.error("Error initializing wasm module:", err));

            // Crimes? What crimes?
            window.increment = increment;
            window.engine = Engine.new();

            window.addEventListener("keydown", (event) => {
                window.engine.key_down(event);
            })

            let tick = (timestamp) => {
                window.engine.tick(timestamp);
                window.requestAnimationFrame(tick);
            }

            window.requestAnimationFrame(tick);
        </script>
        <script type="module" crossorigin src="./ui/main.js"></script>
    </body>
</html>
